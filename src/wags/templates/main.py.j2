"""WAGS proxy server with middleware."""

from pathlib import Path

from wags import create_proxy, load_config
from wags.middleware import ElicitationMiddleware, RootsMiddleware
from {{ handlers_module }} import {{ class_name }}

config = load_config(Path(__file__).parent / "{{ config_filename }}")
mcp = create_proxy(config, server_name="{{ server_name }}")

handlers = {{ class_name }}()

# mcp.add_middleware(RootsMiddleware(handlers=handlers))
# mcp.add_middleware(ElicitationMiddleware(handlers=handlers))

if __name__ == "__main__":
    mcp.run()